<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<link href="../css/interface.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div class="div_body">
  <div class="top"><a href="../Index.html">返回</a></div>
  <div>
    <p>包含文件</p>
    <div class="code">#include &lt;IUserManager.h&gt;</div>
    <p>&nbsp;</p>
  </div>
  <div>
    <p>函数定义</p>
    <div class="interface_des">
    	<p>
      <div class="code"><span class="key">virtual</span> <span class="type">int</span> <span class="functionname">AddUser</span>(<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sUsername</span>,<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sPassword</span>,<span class="top"><span class="top"><span class="type">int</span></span></span> <span class="value">nLevel</span>,<span class="type">int</span> <span class="value">nAuthorityMask1</span>,<span class="type">int</span> <span class="value">nAuthorityMask2</span>) = 0;</div>
   	  <div class="desc"> 向系统中添加名称为<span class="value">sUsername</span>的用户，该用户密码为<span class="value">sPassword</span>。<span class="value">nLevel</span>指明了用户的权限等级，当<span class="value">nLevel</span>为0时，为高级管理员；当<span class="value">nLevel</span>为1时为管理员；当<span class="value">nLevel</span>为2是为普通用户；当<span class="value">nLevel</span>为3时为游客。<span class="value">nAuthorityMask1</span>和<span class="value">nAuthorityMask2</span>指明了用户的详细权限，当前保留未使用，在传入时请填0xFFFFFFFF。<br />
   	  当函数运行成功时，返回0，否则返回错误号，具体错误号参考“错误号定义”。</div>
    	</p>
    	<div class="code"><span class="key">virtual</span> <span class="value"><span class="type">int</span></span> <span class="functionname">RemoveUser</span>(<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sUsername</span>) = 0;</div>
   	  <div class="desc">在系统中删除用户名为<span class="value">sUsername</span>的用户。<br />
   	  当函数运行成功时，返回0，否则返回错误号，具体错误号参考“错误号定义”。</div>
    	<br/>
   	  <div class="code"><span class="key">virtual</span> <span class="type">int</span> <span class="functionname">ModifyUserPassword</span>(<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sUsername</span>,<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sNewPassword</span>) = 0;</div>
   	  <div class="desc">将用户<span class="value">sUsername</span>的密码修改为<span class="value">sNewPassword</span>。<br />
   	  当函数运行成功时，返回0，否则返回错误号，具体错误号参考“错误号定义”。</div>
    	<br/>
   	  <div class="code"><span class="key">virtual</span> <span class="type">int</span> <span class="functionname">ModifyUserLevel</span>(<span class="key">const</span> <span class="type"><span class="value"><span class="type">QString</span></span></span> &amp; <span class="value">sUsername</span>,<span class="type">int</span> <span class="value">nLevel</span>) = 0;</div>
   	  <div class="desc">将用户<span class="value">sUsername</span>的权限等级设置为<span class="value">nLevel</span>。<br />
      当函数运行成功时，返回0，否则返回错误号，具体错误号参考“错误号定义”。   	  </div>
    	</p>
   	  <div class="code"><span class="key">virtual</span> <span class="type">int</span> <span class="functionname">ModifyUserAuthorityMask</span>(<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sUsername</span>,<span class="type">int</span> <span class="value">nAuthorityMask1</span>,<span class="type">int</span> <span class="value">nAuthorityMask2</span>) = 0;</div>
   	  <div class="desc">修改用户<span class="value">sUsername</span>的详细权限，<span class="value">nAuthorityMask1</span>与<span class="value">nAuthorityMask2</span>当前保留未使用，在传入时请填0xFFFFFFFF<br />
   	  当函数运行成功时，返回0，否则返回错误号，具体错误号参考“错误号定义”。   	  </div>
    	</p>
   	  <div class="code"><span class="key">virtual</span> bool <span class="functionname">IsUserExists</span>(<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sUsername</span>) = 0;</div>
   	  <div class="desc">检查系统中是否存在用户<span class="value">sUsername</span>，当存在时，函数返回true，否则返回false。</div>
    	</p>
   	  <div class="code"><span class="key">virtual</span> bool <span class="functionname">CheckUser</span>(<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sUsername</span>,<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sPassword</span>) = 0;</div>
   	  <div class="desc">校验用户名<span class="value">sUsername</span>的密码<span class="value">sPassword</span>是否正确，正确时返回true，否则返回false。</div>
    	</p>
   	  <div class="code"><span class="key">virtual</span> <span class="type">int</span> <span class="functionname">GetUserLevel</span>(<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sUsername</span>,<span class="type">int</span> &amp; <span class="value">nLevel</span>) = 0;</div>
   	  <div class="desc">获取用户<span class="value">sUsername</span>的等级权限，等级权限通过<span class="value">nLevel</span>返回。<br />
   	  当函数运行成功时，返回0，否则返回错误号，具体错误号参考“错误号定义”。<br />
   	  <div class="remark">
   	    <p>备注：<br />
   	      该接口在插件中定义为<br />
   	      <span class="type">int</span> <span class="functionname">GetUserLevel</span>( <span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sUsername</span> );<br />
   	    返回值为用户<span class="value">sUsername</span>的权限等级，当函数运行失败时，返回-1。</p>
   	  </div>
   	  </div>
    	</p>
   	  <div class="code"><span class="key">virtual</span> <span class="type">int</span> <span class="functionname">GetUserAuthorityMask</span>(<span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sUsername</span>,<span class="type">int</span> &amp; <span class="value">nAuthorityMask1</span>, <span class="type">int</span> &amp; <span class="value">nAuthorityMask2</span>) = 0;</div>
   	  <div class="desc">获取用户<span class="value">sUsername</span>的详细权限，权限值在<span class="value">nAuthorityMask1</span>和<span class="value">nAuthorityMask2</span>传出，当前<span class="value">nAuthorityMask1</span>和<span class="value">nAuthorityMask2</span>保留未使用，固定为0xFFFFFFFF。<br />
      当函数运行成功时，返回0，否则返回错误号，具体错误号参考“错误号定义”。   	  <br />
      <div class="remark">
        <p>备注：<br />
        该接口在插件中定义为<br />
        <span class="type">QStringList</span> <span class="functionname">GetUserAuthorityMask</span>( <span class="key">const</span> <span class="type">QString</span> &amp; <span class="value">sUsername</span> );<br />
返回值为用户<span class="value">sUsername</span>的详细权限，元素0为C++接口下的<span class="value">nAuthorityMask1</span>，元素1为C++接口下的<span class="value">nAuthorityMask2</span>。前<span class="value">nAuthorityMask1</span>和<span class="value">nAuthorityMask2</span>保留未使用，固定为4294967295。<br />
当函数运行错误时，QStringList长度为0。<br />
        </p>
      </div>
   	  </div>
    	</p>
   	  <div class="code"><span class="key">virtual</span> <span class="type">int</span> <span class="functionname">GetUserCount</span>() = 0;</div>
   	  <div class="desc">获取系统中的用户数。</div>
    	</p>
   	  <div class="code"><span class="key">virtual</span> <span class="type">QStringList</span> <span class="functionname">GetUserList</span>() = 0;</div>
       	  <div class="desc">获取系统中的用户名列表。</div>
    	</p>
    </div>
    <p>&nbsp;</p>
  </div>
  <div>
    <p>错误号定义</p>
    <table width="100%" border="1" cellpadding="1" cellspacing="0">
      <tr>
        <td width="17%">&nbsp;</td>
        <td width="27%">&nbsp;</td>
        <td width="56%">&nbsp;</td>
      </tr>
      <tr>
        <td>S_OK</td>
        <td>0</td>
        <td>成功</td>
      </tr>
      <tr>
        <td>E_USER_NOT_FOUND</td>
        <td>1</td>
        <td>用户不存在</td>
      </tr>
      <tr>
        <td>E_PASSWORD</td>
        <td>2</td>
        <td>密码错误</td>
      </tr>
      <tr>
        <td>E_SYSTEM_FAILED</td>
        <td>3</td>
        <td>系统错误</td>
      </tr>
    </table>
    <p>&nbsp; </p>
  </div>
  <p>&nbsp;</p>
</div>
</body>
</html>
