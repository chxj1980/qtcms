<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style type="text/css">
p.MsoNormal1 {mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
p.MsoNormal11 {mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
p.MsoNormal121 {mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
span.value12 {mso-style-name:value1;
	mso-style-unhide:no;
	color:#9966CC;}
span.value1211 {mso-style-name:value1;
	mso-style-unhide:no;
	color:#9966CC;}
span.value1212 {mso-style-name:value1;
	mso-style-unhide:no;
	color:#9966CC;}
span.value13 {mso-style-name:value1;
	mso-style-unhide:no;
	color:#9966CC;}
p.MsoNormal12 {mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
p.MsoNormal111 {mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
p.MsoNormal1211 {mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
span.value121 {mso-style-name:value1;
	mso-style-unhide:no;
	color:#9966CC;}
span.value12111 {mso-style-name:value1;
	mso-style-unhide:no;
	color:#9966CC;}
span.value12121 {mso-style-name:value1;
	mso-style-unhide:no;
	color:#9966CC;}
span.value131 {mso-style-name:value1;
	mso-style-unhide:no;
	color:#9966CC;}
span.value131 {mso-style-name:value1;
	mso-style-unhide:no;
	color:#9966CC;}
</style>
</head>

<body>
<p>编辑人：杨美化<br />
  编辑日期：2014.01.13<br />
  插件简介：<br />
  //插件名称：RecordPlayer插件<br />
  //插件功能：实现本地录像检索和同步回放<br />
  接口说明：<br />
  //简述：检索设备是否有录像文件存在，如果有通过回调返回录像的日期。&nbsp;<br />
  //输入参数:<br />
  // sdevname: 设备名称&nbsp;<br />
  //返回值:&nbsp;<br />
  // 0: 调用成功&nbsp;<br />
  // 1: 调用失败&nbsp;<br />
  int searchDateByDeviceName(const QString &amp; sdevname);</p>
<p>//简述：检索设备是否有录像文件存在,如果有返回录像文件的信息。&nbsp;<br />
  //输入参数:<br />
  // sdevname: 设备名称&nbsp;<br />
  // sdate：  录像日期，格式为&ldquo;yyyy-MM-dd&rdquo;。<br />
  // sbegintime：  开始时间，格式为&ldquo;hh:mm:ss&rdquo;。<br />
  // sendtime：  结束时间，格式为&ldquo;hh:mm:ss&rdquo;。<br />
  // schannellist：通道号，从1开始，格式为&ldquo;1;2;3;4;&rdquo;。<br />
  //返回值：&nbsp;<br />
  // 1：调用失败&nbsp;<br />
  // 0：调用成功&nbsp;<br />
  int RecordPlayer::searchVideoFile(const QString&amp; sdevname,const  QString&amp; sdate,const QString&amp; sbegintime,const QString&amp;  sendtime,const QString&amp; schannellist);</p>
<p>//简述：检索设备是否有录像文件存在,如果有返回录像文件的信息。&nbsp;<br />
//输入参数:<br />
// sDevName: 设备名称&nbsp;<br />
// sDate：  录像日期，格式为&ldquo;yyyy-MM-dd&rdquo;。<br />
 // nTypes：为检索的类型组合 (按位计算，第0位表示定时录像，第1位表示手动录像，第2位表示报警录像，第3位表示移动侦测录像，例如&quot;15&quot;，表示检索所有类型的组合)。<br />
//返回值：&nbsp;<br />
// 1：调用失败&nbsp;<br />
// 0：调用成功&nbsp;<br />
int RecordPlayer::searchVideoFileEx( const QString &amp;sDevName, const QString&amp; sDate, const int&amp; nTypes );</p>
<p class="MsoNormal1" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//搜索符合条件的视频文件。检索结果以事件的形式抛出。</p>
<p class="MsoNormal1" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//输入参数<span class="value13">nWndId</span>：为窗口ID</p>
<p class="MsoNormal1" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//输入参数<span class="value13"><span lang="EN-US" xml:lang="EN-US">sDate</span></span>：为要搜索的日期<span
lang="EN-US" xml:lang="EN-US"> (</span>格式<span lang="EN-US" xml:lang="EN-US">&quot;yyyy-MM-dd&quot;)</span><span style='font-size:9.5pt;font-family:新宋体;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-bidi-font-family:新宋体;color:#A31515'
lang="EN-US" xml:lang="EN-US">
  <o:p></o:p>
</span></p>
<p class="MsoNormal11" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//输入参数<span class="value1211">sStartTime</span>：为开始检索时间（格式&quot;hh:mm:ss&quot;)</p>
<p class="MsoNormal121" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//输入参数<span class="value1212">sEndTime</span>：为结束<span class="MsoNormal11" style="mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none">检索时间（格式&quot;hh:mm:ss&quot;)</span></p>
<p class="MsoNormal1" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//输入参数<span class="value12">nTypes</span>：为检索的类型组合 (按位计算，第0位表示定时录像，第1位表示手动录像，第2位表示报警录像，第3位表示移动侦测录像，例如&quot;15&quot;，表示检索所有类型的组合)</p>
<p class="MsoNormal1" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//返回值:</p>
<p class="MsoNormal1" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//1:调用失败</p>
<p class="MsoNormal1" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//0:调用成功<br />
  int searchVideoFileEx2(const int & nWndId,const QString & sDate,const QString & sStartTime,const QString & sEndTime,const int & nTypes);</p>
<p class="MsoNormal1" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>&nbsp;</p>
<p class="MsoNormal1" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>&nbsp;</p>
<p class="MsoNormal12" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//添加播放文件到同步组中，并指定文件播放的窗口ID。</p>
<p class="MsoNormal12" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//输入参数<span class="value131">nWndId</span>：为窗口ID</p>
<p class="MsoNormal12" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'><span class="MsoNormal1" style="mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none">//输入参数<span class="value131"><span lang="EN-US" xml:lang="EN-US">sDate</span></span>：为要搜索的日期<span style='font-size:9.5pt;font-family:新宋体;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-bidi-font-family:新宋体;color:#A31515'
lang="EN-US" xml:lang="EN-US">
  <o:p></o:p>
  </span></span><span style='font-size:9.5pt;font-family:新宋体;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-bidi-font-family:新宋体;color:#A31515'
lang="EN-US" xml:lang="EN-US">
  <o:p></o:p>
</span></p>
<p class="MsoNormal111" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//输入参数<span class="value12111">sStartTime</span>：为开始检索时间</p>
<p class="MsoNormal1211" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//输入参数<span class="value12121">sEndTime</span>：为结束<span class="MsoNormal11" style="mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none">检索时间</span></p>
<p class="MsoNormal12" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'><span class="MsoNormal" style="mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none">//输入参数<span class="value121">nTypes</span>：为检索的类型组合 (按位计算，第0位表示定时录像，第1位表示手动录像，第2位表示报警录像，第3位表示移动侦测录像，例如&quot;15&quot;，表示检索所有类型的组合)</span></p>
<p class="MsoNormal12" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//返回值：</p>
<p class="MsoNormal12" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//1：调用成功</p>
<p class="MsoNormal12" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>//2：调用失败</p>
<p class="MsoNormal12" style='mso-pagination:none;mso-layout-grid-align:none;
text-autospace:none'>int AddFileIntoPlayGroupEx(const int &amp; nWndId,const QString&amp; sDate,const QString &amp; sStartTime,const QString &amp; sEndTime,const int &amp; nTypes);</p>
<p>&nbsp;</p>
<p>//添加播放文件到同步组中，并指定文件播放的窗口ID<br />
  //输入参数：<br />
  //filelist:文件名列表，列表中的文件必须是同一个通道号下的文件，包括完整的文章路径，且按时间先后排序如：D:/JAREC/2014-01-10/99467979/CHL02/190545.avi,D:/JAREC/2014-01-10/99467979/CHL02/201525.avi,D:/JAREC/2014-01-10/99467979/CHL02/204137.avi<br />
  //wnd:播放窗口的id<br />
  //start:开始播放时间(时间格式：&quot;yyyy-MM-dd  hh:mm:ss&quot;)<br />
  //end：结束播放时间(时间格式：&quot;yyyy-MM-dd  hh:mm:ss&quot;)<br />
  //返回值：<br />
  //0：添加成功<br />
  //1：添加失败，通道组已经满    <br />
  //2：添加失败，窗口已经被占用<br />
  //3：添加失败，（失败原因未定义）<br />
  int  AddFileIntoPlayGroup(const QString &amp;filelist,const int &amp;nWndID,const  QString &amp;startTime,const QString &amp;endTime);</p>
<p>&nbsp;</p>
<p>//设置同步组数量，默认为4<br />
  //输入参数：<br />
  //num:设置同步组的数量值<br />
  //返回值：<br />
  //0：设置成功<br />
  //1：设置失败<br />
  int SetSynGroupNum(int num);</p>
<p>//组播放<br />
  //返回值：<br />
  //0：调用成功<br />
  //1：调用失败<br />
  int GroupPlay();</p>
<p>//暂停播放<br />
  //返回值：<br />
  //0：调用成功<br />
  //1：调用失败<br />
  int GroupPause();</p>
<p>//继续播放<br />
  //返回值：<br />
  //0：调用成功<br />
  //调用失败<br />
  int GroupContinue();</p>
<p>//停止播放<br />
  //返回值：<br />
  //0：调用成功<br />
  //1：调用失败<br />
  int GroupStop();</p>
<p>//快进<br />
  //输入参数：<br />
  //speed：正常播放速度的倍数（可选值：2，4，8）<br />
  //返回值：<br />
  //0：调用成功<br />
  //1：调用失败<br />
  int GroupSpeedFast(int speed);</p>
<p>//慢放<br />
  //输入参数：<br />
  //speed：正常播放速度的1/N倍（可选值：2，4，8）<br />
  //返回值：<br />
  //0：调用成功<br />
  //1：调用失败<br />
  int GroupSpeedSlow(int speed);</p>
<p>//恢复正常的播放速度<br />
  //返回值：<br />
  //0：调用成功<br />
  //1：调用失败<br />
  int GroupSpeedNormal();</p>
<p>//简介：设置音量大小<br />
//输入参数：<br/>
//uiPersent: 音量大小，范围从0到100，0为静音，默认为最大音量<br/>
//返回值： <br />
//  1: 音量设置失败 <br />
//  0： 音量设置成功 <br />
int     SetVolume  (const unsigned int &amp;uiPersent);</p>
<p>接口简介：声音开关<br />
输入参数：<br />
bEnabled：声音开关，true打开声音，false关闭声音 <br />
返回值：<br />
0：调用成功<br />
1：调用失败<br />
int   AudioEnabled  (bool bEnabled);</p>
<p align="left">//简介：获取当前的状态</p>
<p align="left">//返回值：</p>
<p align="left"> STATUS_NORMAL_PLAY, 0<br />
  STATUS_FAST_PLAY, 1<br />
  STATUS_SLOW_PLAY, 2<br />
  STATUS_PAUSE, 3<br />
  STATUS_STOP, 4<br />
</p>
<p align="left">int GetCurrentState();</p>
<p>&nbsp;</p>
<p align="left">=========截屏=========</p>
<p align="left">void screenShot();</p>
<p>&nbsp;</p>
<p>插件抛出的事件：<br />
  @1<br />
  事件名称：GetRecordDate<br />
  事件参数:<br />
  devname ：设备名(QString)<br />
  date：日期(QString)，格式为&ldquo;yyyy-MM-dd&rdquo;<br />
  @2<br />
  事件名称：GetRecordFile<br />
  事件参数:<br />
  filename：  文件名(QString)<br />
  filepath：  文件路径(QString)<br />
  filesize：  文件大小（MB）(QString)<br />
  channelnum：通道号(QString)<br />
  startTime: 开始时间(QString)，  格式为&ldquo;yyyy-MM-dd hh:mm:ss&rdquo;<br />
  stopTime: 结束时间(QString)，  格式为&ldquo;yyyy-MM-dd hh:mm:ss&rdquo;<br />
  @3<br />
  事件名称：SearchStop<br />
  事件参数:<br />
  stopevent ：对应事件检索结束(QString) （可用参数 GetRecordDate 、GetRecordFile)<br />
    @4<br />
  事件名称：GetRecordFileEx<br />
  事件参数:<br />
  wndId：  窗口ID(QString)<br />
  type：  录像类型(QString)<br />
  start: 开始时间(QString)，  格式为&ldquo;hh:mm:ss&rdquo;<br />
end: 结束时间(QString)，  格式为&ldquo;hh:mm:ss&rdquo;<br />
@5<br />
事件名称：SearchRecordOver<br />
事件参数:<br />
searchResult: 检索结果(QString)，  格式为&ldquo;SUCCESS&rdquo;，“INCOMPLETE”<br />
@6<br />
事件名称：ThrowException<br />
事件参数:<br />
  filepath：  文件路径(QString)<br />
  expCode：  异常号(int)，0表示正常，1表示文件异常或损坏<br />
wndId：  窗口号(int)，取值从0～3，表示该窗口出现异常</p>
<p>抛出事件：<br />
  @7<br />
  抛出条件：调用screenShot()截图成功;<br />
  事件名称：screenShotInfo;<br />
  事件参数：<br />
  fileName：文件名 :user-chl-type-time(yy-mm-dd-hh-mm-ss-mil)<br />
  fileDir:文件路径（盘符+screenShotEx）<br />
  chl：窗口号（1-49）<br />
  user：操作的用户<br />
  type:类型（0：预览，1：本地回放，2：远程回放）<br />
</p>
<p>//@1 同步回放<br />
<img src="LocalPlayer.png" alt="同步回放调用时序" width="421" height="830" /></p>
</body>
</html>
